<!DOCTYPE html>
<html>

<head>
    <title>Page Title</title>
    <meta charset="UTF-8" />
</head>

<body>
    <div id="display"></div>
    <button>+</button>
    <button>-</button>
    <button>/</button>
    <button>*</button>
    <button>=</button>
    <button>0</button>
    <button>1</button>
    <button>2</button>
    <button>3</button>
    <button>4</button>
    <button>5</button>
    <button>6</button>
    <button>7</button>
    <button>8</button>
    <button>9</button>
    <button>C</button>

    <script>
        function operate(operand1, operand2, operator) {

            console.log(operand1 + operator + operand2);
            switch (operator) {
                case "+": return add(operand1, operand2);
                case "-": return subtract(operand1, operand2);
                case "*": return multiply(operand1, operand2);
                case "/": return divide(operand1, operand2);
            }
        }

        function add(a, b) {
            return +a + +b;
        }

        function subtract(a, b) {
            return +a - +b;
        }

        function divide(a, b) {
            return +a / +b;
        }

        function multiply(a, b) {

            return +a * +b;
        }

        function onButtonClick(e) { //button is either: C (Clear), Number, Operator
            if (this.textContent == "C") {
                operand1 = ""; //ano nga yung caveat when assigning "undefined"?
                operand2 = "";
                operator = "";
                result = "";
                display.textContent = "";

            }

            //if button pressed is a number 
            if (+this.textContent >= 0) {

                if ((operand1 && operator && (lastButton == "+" || lastButton == "*" || lastButton == "/" || lastButton == "-")) || lastButton == "=")
                    display.textContent = "";
                display.textContent += this.textContent;
            }


            //if button pressed is an operator and not C, and a number is displayed
            else if (this.textContent != "C" && display.textContent.length) {

                //if = sign, display a result such that all operand variables become empty
                if (this.textContent == "=" && operator.length && operand1.length) {
                    operand2 = display.textContent;
                    result = operate(operand1, operand2, operator);
                    display.textContent = result;
                    operand1 = "";
                    operand2 = "";
                    operator = "";
                }

                //catch repetitive operator press
                else if (lastButton == "+" || lastButton == "*" || lastButton == "/" || lastButton == "-") {
                    operator = this.textContent;
                }

                //if there's already an operand-operator set, 
                else if (operator.length && operand1.length) {
                    operand2 = display.textContent; //save the displayed number into operand2 then operate:
                    operand1 = operate(operand1, operand2, operator) + ""; //set the result to operand1 to allow chaining
                    display.textContent = operand1;
                    operand2 = "";
                }

                //typing operator after a number for the first time saves number into operand1
                else if (!operand1) {
                    operand1 = display.textContent;
                }

                operator = this.textContent;
            }
            lastButton = this.textContent;
        }

        const buttons = document.querySelectorAll('button');
        buttons.forEach(button => button.addEventListener('click', onButtonClick));

        const display = document.querySelector('#display');
        let operand1 = "";
        let operand2 = "";
        let operator = "";
        let result = "";
        let lastButton = "";

    </script>
</body>

</html>